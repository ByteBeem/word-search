<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>CodePen - Word search</title>
  <link rel="stylesheet" href="./style.css">
  <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
  <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.0.1/socket.io.js"></script>
</head>
<body>

  <input type="hidden" id="set-time" value="3"/>
<div id="countdown">
  
  <div id='tiles' class="color-full"></div>
  <div id ="left" class="countdown-label">Time Remaining</div>
</div>
  <!-- partial:index.partial.html -->
  <div id="theGrid" width="100%"></div>
  <!-- partial -->

  
  
  <script>
    $(document).ready(function() {
      // Add an event listener for beforeunload
      window.addEventListener('beforeunload', function(event) {
        // Cancel the event
        event.preventDefault();
        // Standard-compliant browsers (recent Chrome, Firefox, Safari, etc.)
        event.returnValue = ''; // For some older browsers
      });
      
      // Your existing code here
      // Include your script.js file here or import additional scripts if needed
      $.getScript("./script.js", function(data, textStatus, jqxhr) {
        console.log("Script loaded successfully");
      });
    });

    var minutes = $( '#set-time' ).val();

var target_date = new Date().getTime() + ((minutes * 60 ) * 1000); // set the countdown date
var time_limit = ((minutes * 60 ) * 1000);
//set actual timer
setTimeout(
  function() 
  {
    document.getElementById("left").innerHTML = "Timer Stopped";
  }, time_limit );

var days, hours, minutes, seconds; // variables for time units

var countdown = document.getElementById("tiles"); // get tag element

getCountdown();

setInterval(function () { getCountdown(); }, 1000);

function getCountdown(){

	// find the amount of "seconds" between now and target
	var current_date = new Date().getTime();
	var seconds_left = (target_date - current_date) / 1000;
  
if ( seconds_left >= 0 ) {
  console.log(time_limit);
   if ( (seconds_left * 1000 ) < ( time_limit / 2 ) )  {
     $( '#tiles' ).removeClass('color-full');
     $( '#tiles' ).addClass('color-half');

		} 
    if ( (seconds_left * 1000 ) < ( time_limit / 4 ) )  {
    	$( '#tiles' ).removeClass('color-half');
    	$( '#tiles' ).addClass('color-empty');
    }
  
	days = pad( parseInt(seconds_left / 86400) );
	seconds_left = seconds_left % 86400;
		 
	hours = pad( parseInt(seconds_left / 3600) );
	seconds_left = seconds_left % 3600;
		  
	minutes = pad( parseInt(seconds_left / 60) );
	seconds = pad( parseInt( seconds_left % 60 ) );

	// format countdown string + set tag value
	countdown.innerHTML = "<span>" + hours + ":</span><span>" + minutes + ":</span><span>" + seconds + "</span>"; 
  
}
   
}

function pad(n) {
	return (n < 10 ? '0' : '') + n;
}

  </script>
</body>
</html>
